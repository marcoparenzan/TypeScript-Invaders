var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},InvasionLevel=function(n){function t(){var r,i,t;for(n.call(this),r=this,r._main=new Ship("main",500,450),r._enemies=[],r._enemy_bullets=[],r._ship_bullets=[],r._bonuses=[],i=0,t=0,t=0;t<8;t++)r._enemies.push(new Invader("enemy"+i+t,"blue",70+t*50,20+i*50));for(i++,t=0;t<8;t++)r._enemies.push(new Invader("enemy"+i+t,"red",70+t*50,20+i*50));for(i++,t=0;t<8;t++)r._enemies.push(new Invader("enemy"+i+t,"green",70+t*50,20+i*50));for(i++,t=0;t<8;t++)r._enemies.push(new Invader("enemy"+i+t,"yellow",70+t*50,20+i*50));for(i++,t=0;t<8;t++)r._enemies.push(new Invader("enemy"+i+t,"pink",70+t*50,20+i*50))}return __extends(t,n),t.prototype.render_common=function(n,t){n.write("SCORE: "+t.score.toString(),10,20),n.write("LIVES: "+t.lives.toString(),10,45),n.write("TIME: "+t.time.toString(),10,70),t.paused&&n.write("[ P A U S E D ]",300,245)},t.prototype.render=function(n,t){var i=this;n.clear(),i._enemies.forEach(function(t){t.render(n)}),i._enemy_bullets.forEach(function(t){t.render(n)}),i._ship_bullets.forEach(function(t){t.render(n)}),i._bonuses.forEach(function(t){t.render(n)}),i._main.render(n),i.render_common(n,t)},t.prototype.update=function(n){for(var t=this,o=n.pop_all_commands(),s,u,i,f,e,r=0;r<o.length;r++){s=o[r];switch(s.name){case"move_left":t._main.move(-5,0);break;case"move_right":t._main.move(5,0);break;case"shoot":t._main.shoot(t,n);break;case"pause":n.toggle_pause()}}for(t._enemies.forEach(function(i){i.update(t,n)}),t._enemy_bullets.forEach(function(i){i.update(t,n)}),t._ship_bullets.forEach(function(i){i.update(t,n)}),t._bonuses.forEach(function(i){i.update(t,n)}),t._main.update(t,n),u=0;;){if(t._enemies.length<=u)break;if(i=t._enemies[u],t._main.collides(i,n)){t._main.collided(i,t,n),i.collided(this._main,t,n);break}else for(f=0;;){if(t._ship_bullets.length<=f)break;e=t._ship_bullets[f],i.collides(e,n)&&(e.collided(i,t,n),i.collided(e,t,n)),f++}u++}},t.prototype.add_ship_bullet=function(n){this._ship_bullets.push(n)},t.prototype.add_enemy_bullet=function(n){this._enemy_bullets.push(n)},t.prototype.remove_enemy_bullet=function(n){var t=this,i=t._enemy_bullets.indexOf(n);t._enemy_bullets.splice(i,1)},t.prototype.remove_ship_bullet=function(n){var t=this._ship_bullets.indexOf(n);this._ship_bullets.splice(t,1)},t.prototype.remove_bonus=function(n){var t=this._bonuses.indexOf(n);this._bonuses.splice(t,1)},t.prototype.remove_enemy=function(n,t){var i=this._enemies.indexOf(n);this._enemies.splice(i,1),this._enemies.length==0&&(t.current_context=new EndLevelContext(t.level))},t.prototype.add_energy_to_main=function(n,t){this._main.add_energy(n,t)},t.prototype.increase_shoot_power_to_main=function(n){this._main.increase_shoot_power(n)},t}(GameContext)